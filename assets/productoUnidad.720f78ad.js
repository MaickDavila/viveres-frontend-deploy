import{f as a,r as t,g as e}from"./vendor.9b92c9a3.js";import{i as r}from"./app.57d6f5c3.js";const d=a("producto_unidad",(()=>{const a="producto_unidad",d=t([{}]),o=t({}),n=e((()=>d.value)),i=e((()=>d.value.length>0)),l=a=>d.value.findIndex((t=>t.UnidadId===a))>-1;return{keyModel:a,storeModel:o,getData:n,getColumns:[{Key:"Unidad",Text:"Unidad",Width:10,Align:"left",FormatMoney:!1},{Key:"Factor",Text:"Factor",Width:10,Align:"left",FormatMoney:!1},{Key:"Principal",Text:"Principal",Width:10,Align:"left",FormatMoney:!1}],isValidFormModel:i,saveData:async t=>{try{if(!i.value)return null;let e=(a=>d.value.filter((a=>a.Id>0)).map((t=>({id:t.Id,Producto:a,Unidad:t.UnidadId,Factor:t.Factor,Precio:t.Precio,IsPrincipal:t.IsPrincipal}))))(t),o=null;return e.length>0&&(o=await r.put(`${a}/`,e)),e=(a=>d.value.filter((a=>0===a.Id)).map((t=>({id:0,Producto:a,Unidad:t.UnidadId,Factor:t.Factor,Precio:t.Precio,IsPrincipal:t.IsPrincipal}))))(t),e.length>0&&(o=await r.post(`${a}/`,e)),null==o?void 0:o.data}catch(e){return console.error(e),null}},ExistUnidad:l,addList:a=>{try{if(l(a.UnidadId))return!1;const t=d.value.findIndex((t=>t===a));return-1===t?d.value.push(a):d.value[t]=a,!0}catch(t){return!1}},deleteData:async t=>{try{let e=d.value.findIndex((a=>a===t));return e>-1&&t.Id>0&&await r.delete(`${a}/${t.Id}/`),e=d.value.findIndex((a=>a.UnidadId===t.UnidadId)),e>-1&&d.value.splice(e,1),!0}catch(e){return console.error(e),!1}},setProductoUnidadByProductoId:async a=>{try{const{data:t}=await r.get("get_producto_unidad_by_producto_id",{params:{productoId:a}});return d.value=t,t}catch(t){return console.error(t),null}},clearModel:()=>{o.value={},d.value=[]},getProductoUnidadByProcesoAbierto:async(a,t)=>{try{const{data:e}=await r.get("get_producto_unidad_by_proceso_abierto",{params:{procesoId:a,productoId:t}});return d.value=e,e}catch(e){return console.error(e),null}}}}));export{d as u};
