import{h as e,j as t,o,s as n,r as s,i,G as r,g as a,H as l,m as u,w as p,T as c,C as d,t as h,B as v,I as m}from"./vendor.f30c4ba5.js";var f=Object.defineProperty,g=Object.defineProperties,_=Object.getOwnPropertyDescriptors,w=Object.getOwnPropertySymbols,y=Object.prototype.hasOwnProperty,b=Object.prototype.propertyIsEnumerable,I=(e,t,o)=>t in e?f(e,t,{enumerable:!0,configurable:!0,writable:!0,value:o}):e[t]=o,T=(e,t)=>{for(var o in t||(t={}))y.call(t,o)&&I(e,o,t[o]);if(w)for(var o of w(t))b.call(t,o)&&I(e,o,t[o]);return e},C=(e,t)=>g(e,_(t));const x={type:"default",timeout:5e3,showCloseButton:!0,position:"top-right",transition:"bounce",hideProgressBar:!1,swipeClose:!0};var M,z;(z=M||(M={}))[z.TITLE_ONLY=0]="TITLE_ONLY",z[z.TITLE_DESCRIPTION=1]="TITLE_DESCRIPTION",z[z.COMPONENT=2]="COMPONENT",z[z.VNODE=3]="VNODE";const E={"top-left":{bounce:"mosha__bounceInLeft",zoom:"mosha__zoomIn",slide:"mosha__slideInLeft"},"top-right":{bounce:"mosha__bounceInRight",zoom:"mosha__zoomIn",slide:"mosha__slideInRight"},"top-center":{bounce:"mosha__bounceInDown",zoom:"mosha__zoomIn",slide:"mosha__slideInDown"},"bottom-center":{bounce:"mosha__bounceInUp",zoom:"mosha__zoomIn",slide:"mosha__slideInUp"},"bottom-right":{bounce:"mosha__bounceInRight",zoom:"mosha__zoomIn",slide:"mosha__slideInRight"},"bottom-left":{bounce:"mosha__bounceInLeft",zoom:"mosha__zoomIn",slide:"mosha__slideInLeft"}},S=(e,t=300)=>{let o;return(...n)=>{o&&(clearTimeout(o),o=void 0),o=setTimeout((()=>e(...n)),t)}};var L=e({props:{type:{type:String,default:"default"}}});const O={class:"mosha__icon"},B={key:0,xmlns:"http://www.w3.org/2000/svg",height:"32px",viewBox:"0 0 24 24",width:"32px",fill:"#ffffff"},N=t("path",{d:"M4.47 21h15.06c1.54 0 2.5-1.67 1.73-3L13.73 4.99c-.77-1.33-2.69-1.33-3.46 0L2.74 18c-.77 1.33.19 3 1.73 3zM12 14c-.55 0-1-.45-1-1v-2c0-.55.45-1 1-1s1 .45 1 1v2c0 .55-.45 1-1 1zm1 4h-2v-2h2v2z"},null,-1),P={key:1,xmlns:"http://www.w3.org/2000/svg",height:"32px",viewBox:"0 0 24 24",width:"32px",fill:"#ffffff"},H=t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 11c-.55 0-1-.45-1-1V8c0-.55.45-1 1-1s1 .45 1 1v4c0 .55-.45 1-1 1zm1 4h-2v-2h2v2z"},null,-1),D={key:2,xmlns:"http://www.w3.org/2000/svg",height:"32px",viewBox:"0 0 24 24",width:"32px",fill:"#ffffff"},k=t("path",{d:"M0 0h24v24H0V0z",fill:"none"},null,-1),V=t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM9.29 16.29L5.7 12.7c-.39-.39-.39-1.02 0-1.41.39-.39 1.02-.39 1.41 0L10 14.17l6.88-6.88c.39-.39 1.02-.39 1.41 0 .39.39.39 1.02 0 1.41l-7.59 7.59c-.38.39-1.02.39-1.41 0z"},null,-1),R={key:3,xmlns:"http://www.w3.org/2000/svg",height:"32px",viewBox:"0 0 24 24",width:"32px",fill:"#616161"},$=t("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),j=t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},null,-1),W={key:4,xmlns:"http://www.w3.org/2000/svg",height:"32px",viewBox:"0 0 24 24",width:"32px",fill:"#ffffff"},q=t("path",{d:"M0 0h24v24H0z",fill:"none"},null,-1),U=t("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z"},null,-1);L.render=function(e,t,s,i,r,a){return o(),n("span",O,["warning"===e.type?(o(),n("svg",B,[N])):"danger"===e.type?(o(),n("svg",P,[H])):"success"===e.type?(o(),n("svg",D,[k,V])):"default"===e.type?(o(),n("svg",R,[$,j])):(o(),n("svg",W,[q,U]))])};var X=e({name:"MToast",components:{MIcon:L},props:{visible:Boolean,text:{type:String,default:""},description:{type:String,default:""},toastBackgroundColor:{type:String,default:""},type:{type:String,default:"default"},onClose:{type:Function,default:()=>null},onCloseHandler:{type:Function,required:!0},offset:{type:Number,required:!0},id:{type:Number,required:!0},timeout:{type:Number,default:5e3},position:{type:String,required:!0},showCloseButton:{type:Boolean,default:!0},swipeClose:{type:Boolean,default:!0},hideProgressBar:{type:Boolean,default:!1},showIcon:{type:Boolean,default:!1},transition:{type:String,default:"bounce"}},setup(e,t){const o=s(),{width:n}=(()=>{const e=s(-1),t=s(-1),o=o=>{null!==o&&null!==o.currentTarget&&(e.value=o.currentTarget.innerWidth,t.value=o.currentTarget.innerHeight)};return i((()=>{window.innerWidth>0&&(e.value=window.innerWidth,t.value=window.innerHeight),window.addEventListener("resize",S(o))})),r((()=>{window.removeEventListener("resize",S(o))})),{width:e,height:t}})(),{swipedDiff:u,startSwipeHandler:p,swipeStyle:c,cleanUpMove:d}=((e,t,o)=>{const n=s(),i=s(void 0),a=s(),l=e=>e instanceof MouseEvent,u=s=>{!1!==o&&n.value&&(l(s)?i.value=n.value.clientX-s.clientX:i.value=n.value.touches[0].clientX-s.touches[0].clientX,a.value=C(T({},a.value),{transition:"none"}),e.endsWith("left")?a.value.left=-i.value+"px !important":e.endsWith("right")?a.value.right=`${i.value}px !important`:i.value>0?a.value.left=-i.value+"px !important":a.value.right=`${i.value}px !important`,Math.abs(i.value)>200&&t())},p=e=>{!1!==o&&(n.value&&(n.value=void 0),i.value&&(i.value=void 0),removeEventListener(e,u))};return r((()=>{!1!==o&&(p("mousemove"),p("touchmove"))})),{swipedDiff:i,swipeStart:n,swipeStyle:a,swipeHandler:u,startSwipeHandler:t=>{if(!1===o)return;n.value=t;const s=l(t)?"mousemove":"touchmove",r=l(t)?"mouseup":"touchend";addEventListener(s,u),addEventListener(r,(()=>{return t=s,e.endsWith("left")?a.value=T(T({},a.value),{transition:"left .3s ease-out",left:0}):e.endsWith("right")?a.value=T(T({},a.value),{transition:"right .3s ease-out",right:0}):a.value=T(T({},a.value),{transition:"all .3s ease-out",left:0,right:0}),n.value=void 0,i.value=void 0,void removeEventListener(t,u);var t}))},cleanUpMove:p}})(e.position,e.onCloseHandler,e.swipeClose),{transitionType:h}=(v=e.position,m=e.transition,f=u,{transitionType:a((()=>f.value>200?"mosha__fadeOutLeft":f.value<-200?"mosha__fadeOutRight":E[v][m]))});var v,m,f;const{start:g,stop:_,progress:w}=((e,t)=>{const o=s(),n=s(0),a=s(t),l=s(),u=s(100),p=()=>{clearInterval(l.value),clearTimeout(o.value)};return i((()=>{})),r((()=>{p()})),{start:()=>{n.value=Date.now(),clearTimeout(o.value),l.value=setInterval((()=>{u.value--}),t/100-5),o.value=setTimeout(e,a.value)},stop:()=>{clearInterval(l.value),clearTimeout(o.value),a.value-=Date.now()-n.value},clear:p,progress:u}})((()=>{e.onCloseHandler()}),e.timeout),y=a((()=>t.slots.default)),b=a((()=>/<\/?[a-z][\s\S]*>/i.test(e.description))),I=()=>{e.timeout>0&&g()};return l((()=>{const{customStyle:t}=((e,t,o)=>{const n=a((()=>{switch(e){case"top-left":return{left:"0",top:`${t}px`};case"bottom-left":return{left:"0",bottom:`${t}px`};case"bottom-right":return{right:"0",bottom:`${t}px`};case"top-center":return{top:`${t}px`,left:"0",right:"0",marginRight:"auto",marginLeft:"auto"};case"bottom-center":return{bottom:`${t}px`,left:"0",right:"0",marginRight:"auto",marginLeft:"auto"};default:return{right:"0",top:`${t}px`}}}));return o.length>0&&(n.value.backgroundColor=o),{customStyle:n}})(e.position,e.offset,e.toastBackgroundColor);o.value=t.value})),i((()=>{I()})),{style:o,transitionType:h,startTimer:I,progress:w,onTouchStart:e=>{p(e)},onMouseLeave:()=>{d("mousemove"),I()},onMouseDown:e=>{p(e)},swipeStyle:c,isSlotPassed:y,isDescriptionHtml:b,onMouseEnter:()=>{e.timeout>0&&n.value>425&&_()}}}});const F={class:"mosha__toast__content-wrapper"},Y={class:"mosha__toast__content"},G={class:"mosha__toast__content__text"},A={key:1,class:"mosha__toast__content__description"},J={key:0,class:"mosha__toast__slot-wrapper"};X.render=function(e,s,i,r,a,l){const m=u("MIcon");return o(),n(c,{name:e.transitionType,type:"animation"},{default:p((()=>[e.visible?(o(),n("div",{key:0,class:["mosha__toast",e.toastBackgroundColor?null:e.type],style:[e.style,e.swipeStyle],onMouseenter:s[2]||(s[2]=(...t)=>e.onMouseEnter&&e.onMouseEnter(...t)),onMouseleave:s[3]||(s[3]=(...t)=>e.onMouseLeave&&e.onMouseLeave(...t)),onTouchstartPassive:s[4]||(s[4]=(...t)=>e.onTouchStart&&e.onTouchStart(...t)),onMousedown:s[5]||(s[5]=(...t)=>e.onMouseDown&&e.onMouseDown(...t))},[t("div",F,[e.showIcon?(o(),n(m,{key:0,type:e.type},null,8,["type"])):d("",!0),t("div",Y,[t("div",G,h(e.text),1),e.description.length>0&&e.isDescriptionHtml?(o(),n("div",{key:0,class:"mosha__toast__content__description",innerHTML:e.description},null,8,["innerHTML"])):d("",!0),e.description.length>0&&!e.isDescriptionHtml?(o(),n("div",A,h(e.description),1)):d("",!0)])]),e.isSlotPassed?(o(),n("div",J,[v(e.$slots,"default")])):d("",!0),e.showCloseButton?(o(),n("div",{key:1,class:"mosha__toast__close-icon",onClick:s[1]||(s[1]=(...t)=>e.onCloseHandler&&e.onCloseHandler(...t))})):d("",!0),e.hideProgressBar?d("",!0):(o(),n("div",{key:2,class:"mosha__toast__progress",style:{width:`${e.progress}%`}},null,4))],38)):d("",!0)])),_:3},8,["name"])};const K={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[],"top-center":[],"bottom-center":[]};let Q=0;const Z=(e,t)=>{const o=Q++,n=t?oe(t):x;if(e.__v_isVNode)return ee(o,M.VNODE,n,e),{close:()=>ie(o,n.position)};if(e.hasOwnProperty("render"))return ee(o,M.COMPONENT,n,e),{close:()=>ie(o,n.position)};const s=ne(e);return ee(o,M.TITLE_DESCRIPTION,n,s),{close:()=>ie(o,n.position)}},ee=(e,o,n,s)=>{setTimeout((()=>{const i=se(n,K,12),r=document.createElement("div");let a;document.body.appendChild(r),a=o===M.VNODE?t(X,te(n,e,i,ie),(()=>[s])):o===M.TITLE_DESCRIPTION?t(X,te(n,e,i,ie,s)):t(X,te(n,e,i,ie),(()=>[t(s)])),m(a,r),K[n.position].push({toastVNode:a,container:r}),a.component&&(a.component.props.visible=!0)}),1)},te=(e,t,o,n,s)=>C(T(T({},e),s),{id:t,offset:o,visible:!1,onCloseHandler:()=>{n(t,e.position?e.position:"top-right")}}),oe=e=>{const t=C(T({},e),{type:e.type||x.type,timeout:e.timeout||x.timeout,showCloseButton:e.showCloseButton,position:e.position||x.position,showIcon:e.showIcon,swipeClose:e.swipeClose,transition:e.transition||x.transition});return t.hideProgressBar=void 0!==t.timeout&&t.timeout<=0,void 0!==e.hideProgressBar&&(t.hideProgressBar=e.hideProgressBar),t},ne=e=>({text:"string"==typeof e?e:e.title,description:"string"==typeof e?void 0:e.description}),se=(e,t,o)=>{let n=o;if(!e.position)throw new Error("no position");return t[e.position].forEach((({toastVNode:e})=>{const t=e.el.offsetHeight+o;n+=t||0})),n},ie=(e,t)=>{const o=K[t],n=o.findIndex((({toastVNode:t})=>t.props&&e===t.props.id));if(-1===n)return;const{container:s,toastVNode:i}=o[n];if(!i.el)return;const r=i.el.offsetHeight;K[t].splice(n,1),((e,t,o,n)=>{for(let s=e;s<t.length;s++){const{toastVNode:e}=t[s];if(!e.el)return;const i=o.split("-")[0]||"top",r=parseInt(e.el.style[i],10)-n-12;if(!e.component)return;e.component.props.offset=r}})(n,o,t,r),i.component&&(i.component.props.visible=!1,i.component.props.onClose&&i.component.props.onClose(),setTimeout((()=>{m(null,s),document.body.removeChild(s)}),1e3))};export{Z as t};
