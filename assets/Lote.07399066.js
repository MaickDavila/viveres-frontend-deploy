import{u as e,_ as t}from"./DataTableComponent.a2f395a1.js";import{f as l,r as o,g as a,h as s,i as r,o as n,s as u,w as d,k as i,e as c,v as g,t as m,x as p,y as v,z as h}from"./vendor.f30c4ba5.js";import{t as x}from"./style.cc01f69b.js";import{i as f}from"./app.d84cd159.js";const b=l("lote",(()=>{const t="lote",l=o({}),s=o({}),r=o(1),n=a((()=>l.value.results)),u=a((()=>l.value.count)),d=a((()=>r.value)),i=a((()=>{const{Nombre:e}=s.value;return e})),c=async()=>{try{const e=1===r.value||0===r.value?{}:{page:r.value},{data:o}=await f.get(t,{params:e});return l.value=o,o}catch(e){return console.error(e),null}},g=e=>{r.value=e,c()};return{keyModel:t,storeModel:s,getData:n,getCounts:u,getColumns:[{Key:"id",Text:"Id",Width:10},{Key:"Nombre",Text:"Nombre",Width:90},{Key:"Codigo",Text:"Codigo",Width:10}],getPageIndex:d,isValidFormModel:i,setData:c,saveData:async()=>{try{if(!i.value)return null;let e=null;return e=s.value.id?await f.put(`lote/${s.value.id}/`,s.value):await f.post("lote/",s.value),c(),e.data}catch(e){return console.error(e),null}},filterData:async e=>{if(e)try{const{data:o}=await f.get(t,{params:{search:e}});return l.value=o,o}catch(o){return console.error(o),null}else c()},setById:async e=>{try{const{data:t}=await f.get(`lote/${e}/`);return t}catch(t){return console.error(t),null}},setPageIndex:g,setPrevius:()=>{r.value>1&&g(r.value-1)},setNext:()=>{const t=Math.abs(Math.ceil(u.value/e().CountPagination));r.value<t&&g(r.value+1)},clearModel:()=>{s.value={}}}})),y=c("svg",{id:"Capa_1",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"170",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve"},[c("g",null,[c("g",null,[c("path",{style:{fill:"#FFE0B1"},d:"M496,48H16C7.18,48,0,55.18,0,64v384c0,8.82,7.18,16,16,16h480c8.82,0,16-7.18,16-16V64\r\nC512,55.18,504.82,48,496,48z"})]),c("g",null,[c("g",null,[c("path",{style:{fill:"#5C546A"},d:"M400,416h-56c-4.422,0-8-3.578-8-8s3.578-8,8-8h56c4.422,0,8,3.578,8,8S404.422,416,400,416z"})])]),c("g",null,[c("g",null,[c("path",{style:{fill:"#8A8895"},d:"M448,416h-16c-4.422,0-8-3.578-8-8s3.578-8,8-8h16c4.422,0,8,3.578,8,8S452.422,416,448,416z"})])]),c("g",null,[c("g",null,[c("path",{style:{fill:"#5C546A"},d:"M448,352H344c-4.422,0-8-3.578-8-8s3.578-8,8-8h104c4.422,0,8,3.578,8,8S452.422,352,448,352z"})])]),c("g",null,[c("g",null,[c("path",{style:{fill:"#5C546A"},d:"M376,384h-32c-4.422,0-8-3.578-8-8s3.578-8,8-8h32c4.422,0,8,3.578,8,8S380.422,384,376,384z"})])]),c("g",null,[c("g",null,[c("path",{style:{fill:"#8A8895"},d:"M416,384h-8c-4.422,0-8-3.578-8-8s3.578-8,8-8h8c4.422,0,8,3.578,8,8S420.422,384,416,384z"})])]),c("g",null,[c("circle",{style:{fill:"#FF4F19"},cx:"360",cy:"288",r:"24"})]),c("g",null,[c("path",{style:{fill:"#9E6459"},d:"M184,48v192c0,2.773,1.438,5.344,3.797,6.805c2.359,1.469,5.297,1.578,7.781,0.352L256,216.945\r\nl60.422,30.211c1.133,0.563,2.352,0.844,3.578,0.844c1.461,0,2.922-0.398,4.203-1.195c2.359-1.461,3.797-4.031,3.797-6.805V48H184\r\nz"})])]),c("g"),c("g"),c("g"),c("g"),c("g"),c("g"),c("g"),c("g"),c("g"),c("g"),c("g"),c("g"),c("g"),c("g"),c("g")],-1),w={class:"row-span-2"},M={class:"text-2xl font-semibold text-black uppercase"},C={class:"text-gray-500"},N=["onSubmit"],F={class:"form-container mt-3 h-full"},I=c("label",{for:"txtNombre",class:"form-label"},"Nombre:",-1),k={class:"form-container mt-3 h-full"},E=c("label",{for:"txtCodigo",class:"form-label"},"Codigo:",-1),P=c("input",{type:"submit",class:"hidden"},null,-1),D=s({setup(l){const a=b(),s=o(!1),f=o(!1),D=e();r((()=>{a.setData()}));const z=e=>{a.filterData(e)},S=e=>{a.setPageIndex(e)},A=()=>{a.clearModel(),D.setFocusInput("txtNombre")},V=({id:e,Nombre:t,Codigo:l})=>{e?(s.value=!0,a.clearModel(),a.storeModel.id=e,a.storeModel.Nombre=t,a.storeModel.Codigo=l,D.setFocusInput("txtNombre")):s.value=!1},j=async()=>{let e="",t="",l=!0;if(a.isValidFormModel){f.value=!0;await a.saveData()?(e="Exitoso",t="El registro se ha guardado correctamente",s.value=!1):(e="Error",t="No se pudo guardar el registro")}else e="Error",t="Ingrese los valores del Formulario",l=!1;x({title:e,description:t},{type:l?"success":"danger",timeout:3e3,position:"bottom-right",hideProgressBar:!0}),f.value=!1},B=e=>{s.value=e};return(e,l)=>{const o=t;return n(),u(o,{columns:i(a).getColumns,data:i(a).getData||[],count:i(a).getCounts,titulo:i(a).keyModel,subtitulo:`Listado de ${i(a).keyModel}s`,"page-index":i(a).getPageIndex,"show-modal":s.value,"modal-width":"30rem","modal-height":"20rem","show-loading":f.value,onAddEvent:A,onUpdateEvent:V,onFilterEvent:z,onPageIndex:S,onNext:l[2]||(l[2]=e=>i(a).setNext()),onPrevius:l[3]||(l[3]=e=>i(a).setPrevius()),onModalIsOpen:B},{imagen:d((()=>[y])),cabecera:d((()=>[c("div",w,[c("h1",M,[g(m(i(a).storeModel.id?"Editar":"Nuevo")+" "+m(i(a).keyModel)+" ",1),c("b",C,m(i(a).storeModel.id),1)])])])),cuerpo:d((()=>[c("form",{class:"form-container",onSubmit:h(j,["prevent"])},[c("div",F,[I,p(c("input",{id:"txtNombre","onUpdate:modelValue":l[0]||(l[0]=e=>i(a).storeModel.Nombre=e),autofocus:"",type:"text",class:"form-input sm:w-full lg:w-[100%]",placeholder:"Nombre",required:""},null,512),[[v,i(a).storeModel.Nombre]])]),c("div",k,[E,p(c("input",{id:"txtCodigo","onUpdate:modelValue":l[1]||(l[1]=e=>i(a).storeModel.Codigo=e),type:"text",class:"form-input sm:w-full lg:w-[100%]",placeholder:"Codigo",required:""},null,512),[[v,i(a).storeModel.Codigo]])]),P],40,N)])),acciones:d((()=>[c("button",{class:"btn-submit text-white font-bold py-2 px-4 rounded-lg",onClick:j}," Guardar ")])),_:1},8,["columns","data","count","titulo","subtitulo","page-index","show-modal","show-loading"])}}});export{D as default};
