import{_ as e}from"./DataTableComponent.5369f172.js";import{f as t,r as o,g as a,h as l,i as s,o as r,s as n,w as u,k as c,e as d,v as i,t as g,x as m,J as p,d as v,l as f,F as x,y as h,z as b}from"./vendor.9b92c9a3.js";import{t as w}from"./style.d50ac2b4.js";import{i as y}from"./app.57d6f5c3.js";import{u as M}from"./utils.068ea219.js";import{u as P}from"./proceso.9d74d721.js";import{u as I}from"./lote.6726d96d.js";import{u as D}from"./notas.04f694be.js";import{u as N}from"./proveedor.7cbc144d.js";const k=t("proceso_lotes",(()=>{const e="proceso_lotes",t=o({}),l=o({}),s=o([{}]),r=o(1),n=a((()=>s.value)),u=a((()=>l.value.count)),c=a((()=>r.value)),d=a((()=>{const{Proceso:e}=t.value;return e>0})),i=async()=>{try{const t=1===r.value||0===r.value?{}:{page:r.value},{data:o}=await y.get(e,{params:t});return l.value=o,o}catch(t){return console.error(t),null}},g=async e=>{if(e)try{const{data:t}=await y.get("filter_proceso_lotes",{params:{text:e}});return s.value=t,t}catch(t){return console.error(t),null}else g(" ")},m=e=>{r.value=e,i()};return{keyModel:e,storeModel:t,getData:n,getCounts:u,getColumns:[{Key:"Id",Text:"Id",Width:10},{Key:"Proceso_Nombre",Text:"Proceso",Width:90},{Key:"Lote_Nombre",Text:"Lote",Width:60},{Key:"Nota_Id",Text:"NOTA",Width:10},{Key:"Proveedor_Nombre",Text:"Proveedor",Width:60}],getPageIndex:c,isValidFormModel:d,setData:i,saveData:async()=>{try{if(!d.value)return null;let o=null;return o=t.value.id?await y.put(`${e}/${t.value.id}/`,t.value):await y.post(`${e}/`,t.value),i(),o.data}catch(o){return console.error(o),null}},filterData:g,setById:async t=>{try{const{data:o}=await y.get(`${e}/${t}/`);return o}catch(o){return console.error(o),null}},setPageIndex:m,setPrevius:()=>{r.value>1&&m(r.value-1)},setNext:()=>{const e=Math.abs(Math.ceil(u.value/M().CountPagination));r.value<e&&m(r.value+1)},clearModel:()=>{t.value={}}}})),C=d("svg",{id:"Capa_1",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"170",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve"},[d("g",null,[d("g",null,[d("path",{style:{fill:"#FFE0B1"},d:"M496,48H16C7.18,48,0,55.18,0,64v384c0,8.82,7.18,16,16,16h480c8.82,0,16-7.18,16-16V64\r\nC512,55.18,504.82,48,496,48z"})]),d("g",null,[d("g",null,[d("path",{style:{fill:"#5C546A"},d:"M400,416h-56c-4.422,0-8-3.578-8-8s3.578-8,8-8h56c4.422,0,8,3.578,8,8S404.422,416,400,416z"})])]),d("g",null,[d("g",null,[d("path",{style:{fill:"#8A8895"},d:"M448,416h-16c-4.422,0-8-3.578-8-8s3.578-8,8-8h16c4.422,0,8,3.578,8,8S452.422,416,448,416z"})])]),d("g",null,[d("g",null,[d("path",{style:{fill:"#5C546A"},d:"M448,352H344c-4.422,0-8-3.578-8-8s3.578-8,8-8h104c4.422,0,8,3.578,8,8S452.422,352,448,352z"})])]),d("g",null,[d("g",null,[d("path",{style:{fill:"#5C546A"},d:"M376,384h-32c-4.422,0-8-3.578-8-8s3.578-8,8-8h32c4.422,0,8,3.578,8,8S380.422,384,376,384z"})])]),d("g",null,[d("g",null,[d("path",{style:{fill:"#8A8895"},d:"M416,384h-8c-4.422,0-8-3.578-8-8s3.578-8,8-8h8c4.422,0,8,3.578,8,8S420.422,384,416,384z"})])]),d("g",null,[d("circle",{style:{fill:"#FF4F19"},cx:"360",cy:"288",r:"24"})]),d("g",null,[d("path",{style:{fill:"#9E6459"},d:"M184,48v192c0,2.773,1.438,5.344,3.797,6.805c2.359,1.469,5.297,1.578,7.781,0.352L256,216.945\r\nl60.422,30.211c1.133,0.563,2.352,0.844,3.578,0.844c1.461,0,2.922-0.398,4.203-1.195c2.359-1.461,3.797-4.031,3.797-6.805V48H184\r\nz"})])]),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g")],-1),F={class:"row-span-2"},_={class:"text-2xl font-semibold text-black uppercase"},E={class:"text-gray-500"},j=["onSubmit"],z={class:"form-container mt-3 h-full"},L=d("label",{for:"txtProceso",class:"form-label"},"Proceso:",-1),S=["value"],V={class:"form-container mt-3 h-full"},O=d("label",{for:"txtProceso",class:"form-label"},"Lote:",-1),A=["value"],T={class:"form-container mt-3 h-full"},U=d("label",{for:"txtProceso",class:"form-label"},"Nota:",-1),q=["value"],K={class:"form-container mt-3 h-full"},W=d("label",{for:"txtProceso",class:"form-label"},"Provedor:",-1),$=["value"],B={class:"form-container mt-3 h-full"},H=d("label",{for:"txtOberservacíon",class:"form-label"},"Oberservacíon:",-1),G=d("input",{type:"submit",class:"hidden"},null,-1),J=l({setup(t){const a=k(),l=P(),y=I(),J=D(),R=N(),Q=o(!1),X=o(!1),Y=M();s((()=>{a.filterData("")}));const Z=e=>{a.filterData(e)},ee=e=>{a.setPageIndex(e)},te=async()=>{a.clearModel(),await l.setData(),await R.setData(),Y.setFocusInput("txtNombre")},oe=async({Id:e,Proceso_Id:t,Lote_Id:o,Nota_Id:s,Proveedor_Id:r})=>{e?(await l.setData(),await R.setData(),await y.setData(),await J.filterData(""),Q.value=!0,a.clearModel(),a.storeModel.id=e,a.storeModel.Proceso=t,a.storeModel.Lote=o,a.storeModel.Nota=s,a.storeModel.Proveedor=r,Y.setFocusInput("txtNombre")):Q.value=!1},ae=async()=>{let e="",t="",o=!0;if(a.isValidFormModel){X.value=!0;await a.saveData()?(e="Exitoso",t="El registro se ha guardado correctamente",Q.value=!1):(e="Error",t="No se pudo guardar el registro")}else e="Error",t="Ingrese los valores del Formulario",o=!1;w({title:e,description:t},{type:o?"success":"danger",timeout:3e3,position:"bottom-right",hideProgressBar:!0}),a.filterData(""),X.value=!1},le=e=>{Q.value=e};return(t,o)=>{const s=e;return r(),n(s,{columns:c(a).getColumns,data:c(a).getData||[],count:c(a).getCounts,titulo:c(a).keyModel,subtitulo:"Listado de Procesos Compras","page-index":c(a).getPageIndex,"show-modal":Q.value,"modal-width":"50rem","modal-height":"30rem","show-loading":X.value,onAddEvent:te,onUpdateEvent:oe,onFilterEvent:Z,onPageIndex:ee,onNext:o[9]||(o[9]=e=>c(a).setNext()),onPrevius:o[10]||(o[10]=e=>c(a).setPrevius()),onModalIsOpen:le},{imagen:u((()=>[C])),cabecera:u((()=>[d("div",F,[d("h1",_,[i(g(c(a).storeModel.id?"Editar":"Nuevo")+" "+g("Proceso compra")+" ",1),d("b",E,g(c(a).storeModel.id),1)])])])),cuerpo:u((()=>[d("form",{class:"form-container",onSubmit:b(ae,["prevent"])},[d("div",z,[L,m(d("select",{id:"proceso","onUpdate:modelValue":o[0]||(o[0]=e=>c(a).storeModel.Proceso=e),class:"form-input w-full focus:text-black lg:w-[50%] bg-green-500 text-white",required:"",onChange:o[1]||(o[1]=e=>{c(y).setData(),c(J).filterData("")})},[(r(!0),v(x,null,f(c(l).getData,((e,t)=>(r(),v("option",{key:t,value:e.id,class:"text-gray-700"},g(e.Nombre),9,S)))),128))],544),[[p,c(a).storeModel.Proceso]])]),d("div",V,[O,m(d("select",{id:"proceso","onUpdate:modelValue":o[2]||(o[2]=e=>c(a).storeModel.Lote=e),class:"form-input w-full focus:text-black lg:w-[50%] bg-green-500 text-white",required:"",onInput:o[3]||(o[3]=e=>c(Y).setFocusInput("txtNombre"))},[(r(!0),v(x,null,f(c(y).getData,((e,t)=>(r(),v("option",{key:t,value:e.id,class:"text-gray-700"},g(e.Nombre),9,A)))),128))],544),[[p,c(a).storeModel.Lote]])]),d("div",T,[U,m(d("select",{id:"proceso","onUpdate:modelValue":o[4]||(o[4]=e=>c(a).storeModel.Nota=e),class:"form-input w-full focus:text-black lg:w-[50%] bg-green-500 text-white",required:"",onInput:o[5]||(o[5]=e=>c(Y).setFocusInput("txtNombre"))},[(r(!0),v(x,null,f(c(J).getData,((e,t)=>(r(),v("option",{key:t,value:e.id,class:"text-gray-700"},g(e.Serie),9,q)))),128))],544),[[p,c(a).storeModel.Nota]])]),d("div",K,[W,m(d("select",{id:"proceso","onUpdate:modelValue":o[6]||(o[6]=e=>c(a).storeModel.Proveedor=e),class:"form-input w-full focus:text-black lg:w-[50%] bg-green-500 text-white",required:"",onInput:o[7]||(o[7]=e=>c(Y).setFocusInput("txtNombre"))},[(r(!0),v(x,null,f(c(R).getData,((e,t)=>(r(),v("option",{key:t,value:e.id,class:"text-gray-700"},g(e.RazonSocial),9,$)))),128))],544),[[p,c(a).storeModel.Proveedor]])]),d("div",B,[H,m(d("textarea",{id:"txtOberservacíon","onUpdate:modelValue":o[8]||(o[8]=e=>c(a).storeModel.Observacion=e),class:"form-input sm:w-full lg:w-[100%]",placeholder:"Oberservacíon",required:""},null,512),[[h,c(a).storeModel.Observacion]])]),G],40,j)])),acciones:u((()=>[d("button",{class:"btn-submit text-white font-bold py-2 px-4 rounded-lg",onClick:ae}," Guardar ")])),_:1},8,["columns","data","count","titulo","page-index","show-modal","show-loading"])}}});export{J as default};
