import{u as e,_ as t}from"./DataTableComponent.2f5ba599.js";import{f as l,r as a,g as o,h as s,i as r,o as n,s as c,w as u,k as i,e as d,v as g,t as p,x as m,y as h,Z as v,z as f}from"./vendor.431aaa16.js";import{t as x,u as b}from"./style.c4efdb2e.js";import{i as y}from"./app.843b894a.js";const M=l("notas",(()=>{const t="notas",l=a({}),s=a({}),r=a(1),n=o((()=>l.value.results)),c=o((()=>l.value.count)),u=o((()=>r.value)),i=o((()=>{const{Proceso:e}=s.value;return e>0})),d=async()=>{try{const e=1===r.value||0===r.value?{}:{page:r.value},{data:a}=await y.get(t,{params:e});return l.value=a,a}catch(e){return console.error(e),null}},g=async e=>{if(e)try{const{data:t}=await y.get("filter_notas",{params:{text:e}});return l.value=t,t}catch(t){return console.error(t),null}else g(" ")},p=e=>{r.value=e,d()};return{keyModel:t,storeModel:s,getData:n,getCounts:c,getColumns:[{Key:"id",Text:"Id",Width:10},{Key:"Proceso_Nombre",Text:"Proceso",Width:90},{Key:"Serie",Text:"Serie",Width:10},{Key:"Fecha",Text:"Fecha",Width:10},{Key:"IsAceptado",Text:"Estado",Width:10}],getPageIndex:u,isValidFormModel:i,setData:d,saveData:async()=>{try{if(!i.value)return null;let e=null;return e=s.value.id?await y.put(`notas/${s.value.id}/`,s.value):await y.post("notas/",s.value),d(),e.data}catch(e){return console.error(e),null}},filterData:g,setById:async e=>{try{const{data:t}=await y.get(`notas/${e}/`);return t}catch(t){return console.error(t),null}},setPageIndex:p,setPrevius:()=>{r.value>1&&p(r.value-1)},setNext:()=>{const t=Math.abs(Math.ceil(c.value/e().CountPagination));r.value<t&&p(r.value+1)},clearModel:()=>{s.value={}}}})),w=d("svg",{id:"Capa_1",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"170",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve"},[d("g",null,[d("g",null,[d("path",{style:{fill:"#FFE0B1"},d:"M496,48H16C7.18,48,0,55.18,0,64v384c0,8.82,7.18,16,16,16h480c8.82,0,16-7.18,16-16V64\r\nC512,55.18,504.82,48,496,48z"})]),d("g",null,[d("g",null,[d("path",{style:{fill:"#5C546A"},d:"M400,416h-56c-4.422,0-8-3.578-8-8s3.578-8,8-8h56c4.422,0,8,3.578,8,8S404.422,416,400,416z"})])]),d("g",null,[d("g",null,[d("path",{style:{fill:"#8A8895"},d:"M448,416h-16c-4.422,0-8-3.578-8-8s3.578-8,8-8h16c4.422,0,8,3.578,8,8S452.422,416,448,416z"})])]),d("g",null,[d("g",null,[d("path",{style:{fill:"#5C546A"},d:"M448,352H344c-4.422,0-8-3.578-8-8s3.578-8,8-8h104c4.422,0,8,3.578,8,8S452.422,352,448,352z"})])]),d("g",null,[d("g",null,[d("path",{style:{fill:"#5C546A"},d:"M376,384h-32c-4.422,0-8-3.578-8-8s3.578-8,8-8h32c4.422,0,8,3.578,8,8S380.422,384,376,384z"})])]),d("g",null,[d("g",null,[d("path",{style:{fill:"#8A8895"},d:"M416,384h-8c-4.422,0-8-3.578-8-8s3.578-8,8-8h8c4.422,0,8,3.578,8,8S420.422,384,416,384z"})])]),d("g",null,[d("circle",{style:{fill:"#FF4F19"},cx:"360",cy:"288",r:"24"})]),d("g",null,[d("path",{style:{fill:"#9E6459"},d:"M184,48v192c0,2.773,1.438,5.344,3.797,6.805c2.359,1.469,5.297,1.578,7.781,0.352L256,216.945\r\nl60.422,30.211c1.133,0.563,2.352,0.844,3.578,0.844c1.461,0,2.922-0.398,4.203-1.195c2.359-1.461,3.797-4.031,3.797-6.805V48H184\r\nz"})])]),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g")],-1),F={class:"row-span-2"},I={class:"text-2xl font-semibold text-black uppercase"},E={class:"text-gray-500"},P=["onSubmit"],C={class:"form-container mt-3 h-full"},D=d("label",{for:"txtNombre",class:"form-label"},"Nombre:",-1),N={class:"form-container mt-3 h-full"},k=d("label",{for:"txtDescripcion",class:"form-label"},"Descripcion:",-1),A={class:"form-container mt-3 h-full"},S=d("label",{for:"txtEstado",class:"form-label"},"Estado:",-1),z=d("input",{type:"submit",class:"hidden"},null,-1),V=s({setup(l){const o=M(),s=a(!1),y=e();r((()=>{o.filterData("")}));const V=e=>{o.filterData(e)},T=e=>{o.setPageIndex(e)},_=()=>{o.clearModel(),y.setFocusInput("txtNombre")},K=({id:e,Serie:t,Fecha:l,IsAceptado:a,Observaciones:r,Proceso_Id:n})=>{e?(s.value=!0,o.clearModel(),o.storeModel.id=e,o.storeModel.Serie=t,o.storeModel.Fecha=l,o.storeModel.IsAceptado=a,o.storeModel.Observaciones=r,o.storeModel.Proceso=n,y.setFocusInput("txtNombre")):s.value=!1},O=async()=>{const e=b();e.show({color:"#34D399",width:40,height:40,container:null,canCancel:!1});let t="",l="",a=!0;if(o.isValidFormModel){await o.saveData()?(t="Exitoso",l="El registro se ha guardado correctamente",s.value=!1):(t="Error",l="No se pudo guardar el registro")}else t="Error",l="Ingrese los valores del Formulario",a=!1;x({title:t,description:l},{type:a?"success":"danger",timeout:3e3,position:"bottom-right",hideProgressBar:!0}),e.hide()},W=e=>{s.value=e};return(e,l)=>{const a=t;return n(),c(a,{columns:i(o).getColumns,data:i(o).getData||[],count:i(o).getCounts,titulo:i(o).keyModel,subtitulo:`Listado de ${i(o).keyModel}`,"page-index":i(o).getPageIndex,"show-modal":s.value,"modal-width":"30rem","modal-height":"20rem",onAddEvent:_,onUpdateEvent:K,onFilterEvent:V,onPageIndex:T,onNext:l[3]||(l[3]=e=>i(o).setNext()),onPrevius:l[4]||(l[4]=e=>i(o).setPrevius()),onModalIsOpen:W},{imagen:u((()=>[w])),cabecera:u((()=>[d("div",F,[d("h1",I,[g(p(i(o).storeModel.id?"Editar":"Nuevo")+" "+p(i(o).keyModel)+" ",1),d("b",E,p(i(o).storeModel.id),1)])])])),cuerpo:u((()=>[d("form",{class:"form-container h-[100%] w-full flex flex-col",onSubmit:f(O,["prevent"])},[d("div",C,[D,m(d("input",{id:"txtNombre","onUpdate:modelValue":l[0]||(l[0]=e=>i(o).storeModel.Fecha=e),autofocus:"",type:"text",class:"form-input sm:w-full lg:w-[100%]",placeholder:"Nombre",required:""},null,512),[[h,i(o).storeModel.Fecha]])]),d("div",N,[k,m(d("input",{id:"txtDescripcion","onUpdate:modelValue":l[1]||(l[1]=e=>i(o).storeModel.Observaciones=e),type:"text",class:"form-input sm:w-full lg:w-[100%]",placeholder:"Descripcion",required:""},null,512),[[h,i(o).storeModel.Observaciones]])]),d("div",A,[S,m(d("input",{id:"txtEstado","onUpdate:modelValue":l[2]||(l[2]=e=>i(o).storeModel.IsAceptado=e),type:"checkbox",class:"form-input sm:w-full lg:w-[100%]",placeholder:"Estado",required:""},null,512),[[v,i(o).storeModel.IsAceptado]])]),z],40,P)])),acciones:u((()=>[d("button",{class:"btn-submit text-white font-bold py-2 px-4 rounded-lg",onClick:O}," Guardar ")])),_:1},8,["columns","data","count","titulo","subtitulo","page-index","show-modal"])}}});export{V as default};
