import{_ as e}from"./DataTableComponent.3e8088c0.js";import{f as t,r as l,g as o,h as a,i as s,o as r,s as n,w as u,k as i,e as d,v as c,t as g,x as m,y as p,z as v}from"./vendor.f30c4ba5.js";import{t as h}from"./style.cc01f69b.js";import{i as x}from"./app.51d37901.js";import{u as f}from"./utils.5428a5cd.js";const b=t("lote",(()=>{const e="lote",t=l({}),a=l({}),s=l(1),r=o((()=>t.value.results)),n=o((()=>t.value.count)),u=o((()=>s.value)),i=o((()=>{const{Nombre:e}=a.value;return e})),d=async()=>{try{const l=1===s.value||0===s.value?{}:{page:s.value},{data:o}=await x.get(e,{params:l});return t.value=o,o}catch(l){return console.error(l),null}},c=e=>{s.value=e,d()};return{keyModel:e,storeModel:a,getData:r,getCounts:n,getColumns:[{Key:"id",Text:"Id",Width:10},{Key:"Nombre",Text:"Nombre",Width:90},{Key:"Codigo",Text:"Codigo",Width:10}],getPageIndex:u,isValidFormModel:i,setData:d,saveData:async()=>{try{if(!i.value)return null;let e=null;return e=a.value.id?await x.put(`lote/${a.value.id}/`,a.value):await x.post("lote/",a.value),d(),e.data}catch(e){return console.error(e),null}},filterData:async l=>{if(l)try{const{data:o}=await x.get(e,{params:{search:l}});return t.value=o,o}catch(o){return console.error(o),null}else d()},setById:async e=>{try{const{data:t}=await x.get(`lote/${e}/`);return t}catch(t){return console.error(t),null}},setPageIndex:c,setPrevius:()=>{s.value>1&&c(s.value-1)},setNext:()=>{const e=Math.abs(Math.ceil(n.value/f().CountPagination));s.value<e&&c(s.value+1)},clearModel:()=>{a.value={}}}})),y=d("svg",{id:"Capa_1",version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"170",viewBox:"0 0 512 512",style:{"enable-background":"new 0 0 512 512"},"xml:space":"preserve"},[d("g",null,[d("g",null,[d("path",{style:{fill:"#FFE0B1"},d:"M496,48H16C7.18,48,0,55.18,0,64v384c0,8.82,7.18,16,16,16h480c8.82,0,16-7.18,16-16V64\r\nC512,55.18,504.82,48,496,48z"})]),d("g",null,[d("g",null,[d("path",{style:{fill:"#5C546A"},d:"M400,416h-56c-4.422,0-8-3.578-8-8s3.578-8,8-8h56c4.422,0,8,3.578,8,8S404.422,416,400,416z"})])]),d("g",null,[d("g",null,[d("path",{style:{fill:"#8A8895"},d:"M448,416h-16c-4.422,0-8-3.578-8-8s3.578-8,8-8h16c4.422,0,8,3.578,8,8S452.422,416,448,416z"})])]),d("g",null,[d("g",null,[d("path",{style:{fill:"#5C546A"},d:"M448,352H344c-4.422,0-8-3.578-8-8s3.578-8,8-8h104c4.422,0,8,3.578,8,8S452.422,352,448,352z"})])]),d("g",null,[d("g",null,[d("path",{style:{fill:"#5C546A"},d:"M376,384h-32c-4.422,0-8-3.578-8-8s3.578-8,8-8h32c4.422,0,8,3.578,8,8S380.422,384,376,384z"})])]),d("g",null,[d("g",null,[d("path",{style:{fill:"#8A8895"},d:"M416,384h-8c-4.422,0-8-3.578-8-8s3.578-8,8-8h8c4.422,0,8,3.578,8,8S420.422,384,416,384z"})])]),d("g",null,[d("circle",{style:{fill:"#FF4F19"},cx:"360",cy:"288",r:"24"})]),d("g",null,[d("path",{style:{fill:"#9E6459"},d:"M184,48v192c0,2.773,1.438,5.344,3.797,6.805c2.359,1.469,5.297,1.578,7.781,0.352L256,216.945\r\nl60.422,30.211c1.133,0.563,2.352,0.844,3.578,0.844c1.461,0,2.922-0.398,4.203-1.195c2.359-1.461,3.797-4.031,3.797-6.805V48H184\r\nz"})])]),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g"),d("g")],-1),w={class:"row-span-2"},M={class:"text-2xl font-semibold text-black uppercase"},C={class:"text-gray-500"},N=["onSubmit"],F={class:"form-container mt-3 h-full"},I=d("label",{for:"txtNombre",class:"form-label"},"Nombre:",-1),k={class:"form-container mt-3 h-full"},E=d("label",{for:"txtCodigo",class:"form-label"},"Codigo:",-1),P=d("input",{type:"submit",class:"hidden"},null,-1),D=a({setup(t){const o=b(),a=l(!1),x=l(!1),D=f();s((()=>{o.setData()}));const z=e=>{o.filterData(e)},S=e=>{o.setPageIndex(e)},A=()=>{o.clearModel(),D.setFocusInput("txtNombre")},V=({id:e,Nombre:t,Codigo:l})=>{e?(a.value=!0,o.clearModel(),o.storeModel.id=e,o.storeModel.Nombre=t,o.storeModel.Codigo=l,D.setFocusInput("txtNombre")):a.value=!1},j=async()=>{let e="",t="",l=!0;if(o.isValidFormModel){x.value=!0;await o.saveData()?(e="Exitoso",t="El registro se ha guardado correctamente",a.value=!1):(e="Error",t="No se pudo guardar el registro")}else e="Error",t="Ingrese los valores del Formulario",l=!1;h({title:e,description:t},{type:l?"success":"danger",timeout:3e3,position:"bottom-right",hideProgressBar:!0}),x.value=!1},B=e=>{a.value=e};return(t,l)=>{const s=e;return r(),n(s,{columns:i(o).getColumns,data:i(o).getData||[],count:i(o).getCounts,titulo:i(o).keyModel,subtitulo:`Listado de ${i(o).keyModel}s`,"page-index":i(o).getPageIndex,"show-modal":a.value,"modal-width":"30rem","modal-height":"20rem","show-loading":x.value,onAddEvent:A,onUpdateEvent:V,onFilterEvent:z,onPageIndex:S,onNext:l[2]||(l[2]=e=>i(o).setNext()),onPrevius:l[3]||(l[3]=e=>i(o).setPrevius()),onModalIsOpen:B},{imagen:u((()=>[y])),cabecera:u((()=>[d("div",w,[d("h1",M,[c(g(i(o).storeModel.id?"Editar":"Nuevo")+" "+g(i(o).keyModel)+" ",1),d("b",C,g(i(o).storeModel.id),1)])])])),cuerpo:u((()=>[d("form",{class:"form-container",onSubmit:v(j,["prevent"])},[d("div",F,[I,m(d("input",{id:"txtNombre","onUpdate:modelValue":l[0]||(l[0]=e=>i(o).storeModel.Nombre=e),autofocus:"",type:"text",class:"form-input sm:w-full lg:w-[100%]",placeholder:"Nombre",required:""},null,512),[[p,i(o).storeModel.Nombre]])]),d("div",k,[E,m(d("input",{id:"txtCodigo","onUpdate:modelValue":l[1]||(l[1]=e=>i(o).storeModel.Codigo=e),type:"text",class:"form-input sm:w-full lg:w-[100%]",placeholder:"Codigo",required:""},null,512),[[p,i(o).storeModel.Codigo]])]),P],40,N)])),acciones:u((()=>[d("button",{class:"btn-submit text-white font-bold py-2 px-4 rounded-lg",onClick:j}," Guardar ")])),_:1},8,["columns","data","count","titulo","subtitulo","page-index","show-modal","show-loading"])}}});export{D as default};
