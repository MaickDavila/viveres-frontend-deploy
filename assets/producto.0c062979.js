import{f as e,r as t,g as a}from"./vendor.f30c4ba5.js";import{i as o}from"./app.7dd6c994.js";const r=e("producto",(()=>{const e="producto",r=t({}),d=t({}),i=t([{}]),u=a((()=>r.value.results)),l=a((()=>i.value)),c=a((()=>r.value.count)),n=a((()=>{const{Categoria:e,Nombre:t}=d.value;return e>0&&t.length>0})),s=async e=>{if(e)try{const{data:t}=await o.get("filter_productos",{params:{text:e}});return r.value=t,t}catch(t){return console.error(t),null}else s(" ")};return{keyModel:e,storeModel:d,getData:u,getCounts:c,getColumns:[{Key:"Id",Text:"Id",Width:5},{Key:"Categoria_Nombre",Text:"Categoria",Width:10},{Key:"Nombre",Text:"Nombre",Width:40},{Key:"CodigoBarra",Text:"Codigo Barra",Width:15},{Key:"Unidad_Nombre",Text:"Unidad",Width:15},{Key:"Precio",Text:"Precio",Width:10,Align:"right",FormatMoney:!0}],isValidFormModel:n,getProductosProcesoLote:l,filterData:s,setById:async e=>{try{const{data:t}=await o.get(`producto/${e}/`);return t}catch(t){return console.error(t),null}},saveData:async()=>{try{if(!n.value)return null;const{Imagen:e}=d.value,t={id:d.value.id,Nombre:d.value.Nombre,Categoria:d.value.Categoria,CodigoBarra:d.value.CodigoBarra};let a=null;a=d.value.id?await o.put(`producto/${d.value.id}/`,t):await o.post("producto/",t);const r=a.data;if(0===e.indexOf("data:image")){const t={imagen:e,productoId:r.id};await o.put("save_image/",t)}return r}catch(e){return console.error(e),null}},clearModel:()=>{d.value={}},filterProductoProcesoLote:async(e,t)=>{try{const{data:a}=await o.get("get_producto_by_proceso_abierto",{params:{procesoId:e,text:t}});i.value=a}catch(a){return console.error(a),null}}}}));export{r as u};
